generator client {
  provider = "prisma-client-js"
}


datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")

}

model migrations {
  id          Int       @id @default(autoincrement())
  filename    String    @unique @db.VarChar(255)
  executed_at DateTime? @default(now()) @db.Timestamp(6)
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model users {
  id                  String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email               String    @unique @db.VarChar(255)
  password_hash       String    @db.VarChar(255)
  role                String    @db.VarChar(50)
  first_name          String    @db.VarChar(100)
  last_name           String    @db.VarChar(100)
  phone               String?   @db.VarChar(20)
  profile_picture_url String?   @db.VarChar(500)
  is_active           Boolean?  @default(true)
  is_verified         Boolean?  @default(false)
  last_login_at       DateTime? @db.Timestamp(6)
  created_at          DateTime? @default(now()) @db.Timestamp(6)
  updated_at          DateTime? @default(now()) @db.Timestamp(6)
  avocat              avocat?
  client              client?

}

model avocat {
  id                  String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id             String   @unique @db.Uuid
  user                users    @relation(fields: [user_id], references: [id], onDelete: Cascade)
  bar_number          String   @unique @db.VarChar(50)
  specialties         String[] @db.Text
  office_address      String?  @db.Text
  office_latitude     Decimal? @db.Decimal(10, 8)
  office_longitude    Decimal? @db.Decimal(11, 8)
  bio                 String?  @db.Text
  years_of_experience Int?
  languages           String[] @db.Text
  availability_status String?  @default("available") @db.VarChar(50)
  rating              Decimal  @default(0.00) @db.Decimal(3, 2)
  total_cases         Int      @default(0)
  created_at          DateTime @default(now()) @db.Timestamp(6)
  updated_at          DateTime @default(now()) @db.Timestamp(6)

  @@map("lawyers")
}

model client {
  id                  String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id             String   @unique @db.Uuid
  user                users    @relation(fields: [user_id], references: [id], onDelete: Cascade)
  address             String?  @db.Text
  city                String?  @db.VarChar(100)
  postal_code         String?  @db.VarChar(20)
  country             String?  @db.VarChar(100)
  date_of_birth       DateTime? @db.Date
  occupation          String?  @db.VarChar(100)
  company_name        String?  @db.VarChar(255)
  emergency_contact   String?  @db.VarChar(100)
  emergency_phone     String?  @db.VarChar(20)
  notes               String?  @db.Text
  created_at          DateTime @default(now()) @db.Timestamp(6)
  updated_at          DateTime @default(now()) @db.Timestamp(6)

  @@map("clients")
}
